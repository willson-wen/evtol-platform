(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{8116:function(e,t,a){Promise.resolve().then(a.bind(a,1811))},1811:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a(7437),s=a(2265),l=a(2749),n=a(1396),d=a.n(n);function i(){let{data:e}=(0,l.useSession)(),[t,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[c,x]=(0,s.useState)(""),[o,g]=(0,s.useState)("all");(0,s.useEffect)(()=>{h()},[o]);let h=async()=>{try{let e=await fetch("/api/research?type=".concat(o));if(!e.ok)throw Error("获取研究报告失败");let t=await e.json();a(t)}catch(e){x(e.message)}finally{i(!1)}};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"研究报告"}),(null==e?void 0:e.user.role)==="admin"&&(0,r.jsx)(d(),{href:"/research/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600",children:"发布报告"})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>g("all"),className:"px-4 py-2 rounded-md ".concat("all"===o?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"),children:"全部"}),(0,r.jsx)("button",{onClick:()=>g("whitepaper"),className:"px-4 py-2 rounded-md ".concat("whitepaper"===o?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"),children:"白皮书"}),(0,r.jsx)("button",{onClick:()=>g("report"),className:"px-4 py-2 rounded-md ".concat("report"===o?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"),children:"研究报告"})]})}),n?(0,r.jsx)("div",{className:"text-center py-12",children:"加载中..."}):c?(0,r.jsx)("div",{className:"text-center py-12 text-red-600",children:c}):0===t.length?(0,r.jsx)("div",{className:"text-center py-12 text-gray-600",children:"暂无研究报告"}):(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.title}),(0,r.jsx)("span",{className:"px-2 py-1 text-sm text-blue-800 dark:text-blue-200 bg-blue-100 dark:bg-blue-900 rounded",children:"whitepaper"===e.type?"白皮书":"研究报告"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4 line-clamp-3",children:e.abstract}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:e},t))}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("span",{children:e.author}),(0,r.jsx)("span",{children:new Date(e.publishDate).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["浏览次数：",e.views]}),(0,r.jsx)(d(),{href:"/research/".concat(e._id),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-200 focus:outline-none",children:"查看详情"})]})]})},e._id))})]})}}},function(e){e.O(0,[250,674,971,938,744],function(){return e(e.s=8116)}),_N_E=e.O()}]);