(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{6999:function(e,t,s){Promise.resolve().then(s.bind(s,6707))},7852:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(7437),a=s(6691),l=s.n(a),i=s(2265);let r={sm:"w-12 h-12",md:"w-16 h-16",lg:"w-24 h-24"};function c(e){let{name:t,src:s,size:a="md"}=e,[c,o]=(0,i.useState)(!1),d=t.split(" ").map(e=>e[0]).join("").toUpperCase();return c?(0,n.jsx)("div",{className:"".concat(r[a]," bg-blue-100 rounded-lg flex items-center justify-center"),children:(0,n.jsx)("span",{className:"text-blue-600 font-semibold text-lg",children:d})}):(0,n.jsx)("div",{className:"".concat(r[a]," relative"),children:(0,n.jsx)(l(),{src:s,alt:t,layout:"fill",objectFit:"contain",className:"rounded-lg",onError:()=>o(!0)})})}},6707:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(7437),a=s(4033),l=s(1396),i=s.n(l),r=s(7852),c=s(2265),o=s(2749),d=s(6932),m=s(848),h=s(9803),x=s(4511);let u=e=>{let{editor:t}=e;return t?(0,n.jsxs)("div",{className:"border-b border-gray-200 p-2 flex flex-wrap gap-1",children:[(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleBold().run(),disabled:!t.can().chain().focus().toggleBold().run(),className:"p-1 rounded ".concat(t.isActive("bold")?"bg-blue-100 text-blue-600":"hover:bg-gray-100"),children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleItalic().run(),disabled:!t.can().chain().focus().toggleItalic().run(),className:"p-1 rounded ".concat(t.isActive("italic")?"bg-blue-100 text-blue-600":"hover:bg-gray-100"),children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:"p-1 rounded ".concat(t.isActive("bulletList")?"bg-blue-100 text-blue-600":"hover:bg-gray-100"),children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:"p-1 rounded ".concat(t.isActive("orderedList")?"bg-blue-100 text-blue-600":"hover:bg-gray-100"),children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleBlockquote().run(),className:"p-1 rounded ".concat(t.isActive("blockquote")?"bg-blue-100 text-blue-600":"hover:bg-gray-100"),children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})})]}):null};function g(e){let{content:t,onChange:s,placeholder:a="写下你的想法...",disabled:l=!1}=e,i=(0,d.jE)({extensions:[m.Z,h.ZP.configure({openOnClick:!1}),x.ZP.configure({inline:!0})],content:t,editable:!l,onUpdate:e=>{let{editor:t}=e;s(t.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[100px] px-4 py-2"}}});return(0,n.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-white",children:[(0,n.jsx)(u,{editor:i}),(0,n.jsx)(d.kg,{editor:i})]})}function b(e){let{newsId:t}=e,{data:s}=(0,o.useSession)(),[a,l]=(0,c.useState)([]),[r,d]=(0,c.useState)(""),[m,h]=(0,c.useState)(""),[x,u]=(0,c.useState)(null),[b,p]=(0,c.useState)(!1),[j,f]=(0,c.useState)(!0),[v,y]=(0,c.useState)(null),[N,w]=(0,c.useState)({total:0,page:1,limit:10,totalPages:0}),[k,L]=(0,c.useState)(!1),C=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let n=await fetch("/api/comments?newsId=".concat(t,"&page=").concat(e,"&limit=").concat(N.limit));if(!n.ok)throw Error("获取评论失败");let a=await n.json();s?l(e=>[...e,...a.comments]):l(a.comments),w(a.pagination)}catch(e){y(e instanceof Error?e.message:"获取评论失败")}finally{f(!1),L(!1)}};(0,c.useEffect)(()=>{C()},[t]);let A=async()=>{k||N.page>=N.totalPages||(L(!0),await C(N.page+1,!0))},S=async e=>{if(e.preventDefault(),!s){window.location.href="/auth/signin";return}if(r.trim()){p(!0);try{let e=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r,newsId:t})});if(!e.ok)throw Error("发表评论失败");let s=await e.json();l(e=>[s,...e]),d("")}catch(e){y(e instanceof Error?e.message:"发表评论失败")}finally{p(!1)}}},T=async e=>{if(!s){window.location.href="/auth/signin";return}if(m.trim()){p(!0);try{let t=await fetch("/api/comments/".concat(e,"/reply"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:m})});if(!t.ok)throw Error("发表回复失败");let s=await t.json();l(t=>t.map(t=>t._id===e?s:t)),h(""),u(null)}catch(e){y(e instanceof Error?e.message:"发表回复失败")}finally{p(!1)}}},E=async e=>{if(!s){window.location.href="/auth/signin";return}try{let t=await fetch("/api/comments/".concat(e,"/like"),{method:"POST"});if(!t.ok)throw Error("处理点赞失败");let{likes:s,isLiked:n}=await t.json();l(t=>t.map(t=>t._id===e?{...t,likes:s,isLiked:n}:t))}catch(e){y(e instanceof Error?e.message:"处理点赞失败")}};return j?(0,n.jsx)("div",{className:"mt-12 text-center",children:"加载评论中..."}):(0,n.jsxs)("div",{className:"mt-12",children:[(0,n.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 mb-8",children:["评论区 (",N.total,")"]}),v&&(0,n.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-600 rounded-lg",children:v}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)("form",{onSubmit:S,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(g,{content:r,onChange:d,placeholder:s?"发表你的看法...":"登录后发表评论",disabled:!s||b})}),(0,n.jsx)("div",{className:"flex justify-end",children:s?(0,n.jsx)("button",{type:"submit",disabled:b||!r.trim(),className:"px-6 py-2 rounded-lg text-white font-medium ".concat(b||!r.trim()?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:b?"发送中...":"发表评论"}):(0,n.jsx)(i(),{href:"/auth/signin",className:"px-6 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700",children:"登录发表评论"})})]})}),(0,n.jsx)("div",{className:"space-y-6",children:0===a.length?(0,n.jsx)("p",{className:"text-center text-gray-500",children:"暂无评论，来发表第一条评论吧！"}):(0,n.jsxs)(n.Fragment,{children:[a.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,n.jsx)("div",{className:"flex justify-between items-start",children:(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:e.author.image?(0,n.jsx)("img",{src:e.author.image,alt:e.author.name,className:"w-10 h-10 rounded-full"}):(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-blue-600 font-medium",children:e.author.name.charAt(0)})})}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.author.name}),(0,n.jsx)("span",{className:"ml-4 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]}),(0,n.jsx)("div",{className:"mt-1 text-gray-600 prose prose-sm",dangerouslySetInnerHTML:{__html:e.content}}),(0,n.jsxs)("div",{className:"mt-2 flex items-center space-x-4",children:[(0,n.jsxs)("button",{onClick:()=>E(e._id),className:"flex items-center space-x-1 text-sm ".concat(e.isLiked?"text-blue-600":"text-gray-500 hover:text-blue-600"),children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:e.isLiked?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),(0,n.jsx)("span",{children:e.likes})]}),(0,n.jsx)("button",{onClick:()=>u(e._id),className:"text-sm text-gray-500 hover:text-blue-600",children:"回复"})]})]})]})}),e.replies&&e.replies.length>0&&(0,n.jsx)("div",{className:"mt-4 ml-14 space-y-4",children:e.replies.map(e=>(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:e.author.image?(0,n.jsx)("img",{src:e.author.image,alt:e.author.name,className:"w-8 h-8 rounded-full"}):(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:e.author.name.charAt(0)})})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.author.name}),(0,n.jsx)("span",{className:"ml-3 text-xs text-gray-500",children:new Date(e.createdAt).toLocaleString()})]}),(0,n.jsx)("div",{className:"mt-1 text-sm text-gray-600 prose prose-sm",dangerouslySetInnerHTML:{__html:e.content}})]})]},e._id))}),x===e._id&&(0,n.jsxs)("div",{className:"mt-4 ml-14",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(g,{content:m,onChange:h,placeholder:"写下你的回复...",disabled:b})}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:()=>u(null),className:"px-4 py-1 text-sm text-gray-600 hover:text-gray-800",children:"取消"}),(0,n.jsx)("button",{onClick:()=>T(e._id),disabled:b||!m.trim(),className:"px-4 py-1 text-sm rounded-lg text-white ".concat(b||!m.trim()?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:b?"发送中...":"发送"})]})]})]},e._id)),N.page<N.totalPages&&(0,n.jsx)("div",{className:"flex justify-center mt-8",children:(0,n.jsx)("button",{onClick:A,disabled:k,className:"px-6 py-2 rounded-lg text-white font-medium ".concat(k?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:k?"加载中...":"加载更多评论"})})]})})]})}let p={1:{title:"Joby Aviation获FAA适航认证重要进展",content:"\n      Joby Aviation今日宣布，其eVTOL飞行器在FAA适航认证过程中取得重要进展。公司完成了一系列关键的测试和验证工作，包括：\n\n      • 结构测试：完成机翼和机身的静态和疲劳测试\n      • 飞行测试：累计完成超过1000小时的试飞\n      • 系统验证：完成关键系统的功能和可靠性验证\n      \n      公司预计将在2025年获得完整的型号合格证，这将使Joby成为首批获得FAA认证的eVTOL制造商之一。\n\n      此外，Joby还透露了其商业化计划：\n      \n      1. 首批商业航线将在美国加利福尼亚州推出\n      2. 已与多个城市达成合作意向\n      3. 正在建设首批vertiport基础设施\n      \n      这一进展标志着eVTOL行业向商业化迈出重要一步，也为未来城市空中交通的发展奠定基础。\n    ",date:"2024-01-10",author:"张航空",company:"Joby Aviation",companyLogo:"/images/joby.png",category:"认证进展",readTime:"5分钟",relatedLinks:[{title:"Joby的eVTOL技术解析",url:"/news/tech-analysis"},{title:"FAA适航认证流程详解",url:"/news/certification-process"}]},2:{title:"亿航智能在广州开展城市空中物流试点",content:"\n      亿航智能今日宣布与广州市政府达成战略合作，将在广州启动城市空中物流配送试点项目。该项目将：\n\n      • 在广州南沙新区建设首个无人机物流配送网络\n      • 开展医疗物资、紧急物资的空中配送服务\n      • 探索常规快递包裹的空中配送模式\n      \n      项目第一阶段将部署10台EH216-L货运型号，服务范围覆盖南沙新区核心区域。亿航预计：\n      \n      1. 日均可完成100-150个配送任务\n      2. 配送时效较地面运输提升60%\n      3. 特殊情况下可24小时全天候运营\n      \n      这是国内首个规模化的城市空中物流试点项目，将为eVTOL在物流领域的应用提供重要经验。\n    ",date:"2024-01-08",author:"李物流",company:"EHang",companyLogo:"/images/ehang.png",category:"商业合作",readTime:"4分钟",relatedLinks:[{title:"EH216-L技术规格",url:"/news/eh216l-specs"},{title:"城市空中物流发展趋势",url:"/news/urban-logistics"}]},3:{title:"Lilium完成新一轮30亿融资",content:"\n      德国eVTOL制造商Lilium今日宣布完成30亿美元融资，这轮融资由多家知名投资机构参与。融资资金将用于：\n\n      • 推进Lilium Jet的研发和测试\n      • 扩建生产基地\n      • 建设商业化基础设施\n      \n      Lilium表示，这笔资金将支持公司：\n      \n      1. 完成EASA认证流程\n      2. 启动量产准备\n      3. 建设首批vertiport网络\n      \n      这是eVTOL行业迄今为止最大的单轮融资，显示了投资者对行业前景的信心。Lilium预计将在2026年开始商业运营。\n    ",date:"2024-01-05",author:"王投资",company:"Lilium",companyLogo:"/images/lilium.png",category:"融资动态",readTime:"6分钟",relatedLinks:[{title:"Lilium商业化战略分析",url:"/news/lilium-strategy"},{title:"eVTOL行业投资概览",url:"/news/evtol-investment"}]}};function j(){let e=Number((0,a.useParams)().id),t=p[e];return t?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12",children:(0,n.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("nav",{className:"flex items-center text-sm text-gray-500 mb-8",children:[(0,n.jsx)(i(),{href:"/market",className:"hover:text-blue-600",children:"市场动态"}),(0,n.jsx)("span",{className:"mx-2",children:"/"}),(0,n.jsx)("span",{className:"text-gray-900",children:t.category})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),(0,n.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-10 h-10 relative mr-3",children:(0,n.jsx)(r.default,{name:t.company,src:t.companyLogo,size:"md"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.company}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:t.author})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,n.jsx)("span",{children:t.date}),(0,n.jsx)("span",{children:"•"}),(0,n.jsx)("span",{children:t.readTime}),(0,n.jsx)("span",{children:"•"}),(0,n.jsx)("span",{className:"text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:t.category})]})]})]}),(0,n.jsx)("article",{className:"prose prose-blue max-w-none mb-12",children:t.content.split("\n").map((e,t)=>(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:e.trim()},t))}),(0,n.jsxs)("div",{className:"border-t border-gray-200 pt-8 mb-12",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"相关阅读"}),(0,n.jsx)("div",{className:"space-y-4",children:t.relatedLinks.map((e,t)=>(0,n.jsx)(i(),{href:e.url,className:"block bg-white rounded-lg border border-gray-200 p-4 hover:border-blue-300 transition-colors",children:(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 hover:text-blue-600",children:e.title})},t))})]}),(0,n.jsx)(b,{newsId:e})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12",children:(0,n.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"未找到新闻"}),(0,n.jsx)(i(),{href:"/market",className:"text-blue-600 hover:text-blue-800",children:"返回市场动态"})]})})}}},function(e){e.O(0,[572,902,250,674,749,497,971,938,744],function(){return e(e.s=6999)}),_N_E=e.O()}]);