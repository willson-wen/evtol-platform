"use strict";(()=>{var e={};e.id=329,e.ids=[329],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79816:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>h,originalPathname:()=>v,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>m});var r={};o.r(r),o.d(r,{GET:()=>c});var n=o(95419),a=o(69108),s=o(99678),i=o(78070),u=o(22345);async function c(){try{let e=(await u.default).db("evtol_db"),t=await e.command({ping:1});return i.Z.json({message:"数据库连接成功！",test:t})}catch(e){return console.error("数据库连接错误:",e),i.Z.json({error:"数据库连接失败"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/test/route",pathname:"/api/test",filename:"route",bundlePath:"app/api/test/route"},resolvedPagePath:"C:\\Users\\Lenovo\\Desktop\\低空网站原始\\app\\api\\test\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:g,headerHooks:h,staticGenerationBailout:m}=p,v="/api/test/route";function f(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},22345:(e,t,o)=>{o.d(t,{u:()=>i});var r=o(11185),n=o.n(r);let a=process.env.MONGODB_URI;if(!a)throw Error("请在环境变量中设置 MONGODB_URI");let s=!1;async function i(){if(s){console.log("已连接到 MongoDB");return}try{let e=await n().connect(a);s=1===e.connections[0].readyState,console.log("MongoDB 连接成功")}catch(e){throw console.error("MongoDB 连接失败:",e),e}}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[638,206],()=>o(79816));module.exports=r})();